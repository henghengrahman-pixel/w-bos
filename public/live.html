<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Live Score • Bandar Toto</title>
  <link rel="icon" type="image/png" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgOFmCVgvif-PJWKOrwAnbV5CURPdCLT3vSFXkEiETLvoTCtQuz78gyuFlNPhRN72qrekc-feopiUgaOOt_dTlNJo217UsEsoR7KTFUu_As-1PY7G0n_eBFplC3EfquInsEd085chTAJrNi4BUN7Gr-m5PMGKUXp20fGUw3NCfgN82FXIU1RIsCvOnT_CRW/s320/logoapk.webp" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    .grid{display:grid;gap:12px}
    @media(min-width:860px){ .grid.cols-2{grid-template-columns:1fr 1fr} .grid.cols-3{grid-template-columns:1fr 1fr 1fr} }
    .pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#1b1b22;border:1px solid #2b2b38;font-size:12px}
    .muted{color:#b5b8c6}.mini{font-size:12px}.badge{font-weight:800}
    .evt{display:flex;gap:8px;align-items:center}.evt .t{width:34px;text-align:right;font-weight:800}
    .divider{height:1px;background:#2b2b38;margin:8px 0}
    .flag{width:18px;height:12px;object-fit:cover;border:1px solid #2b2b38;border-radius:2px;margin-right:8px;vertical-align:-2px}

    /* ====== LIVE LIST (tetap seperti sebelumnya) ====== */
    .live-list{display:block}
    .lg{margin:12px 0}
    .lg-head{display:flex;align-items:center;gap:8px;padding:10px 12px;font-weight:900;letter-spacing:.2px;background:#0f1220;border:1px solid #2b2b38;border-radius:12px;color:#e9ebf5}
    .lg-head .lname{opacity:.92;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .lg-body{margin-top:8px;display:flex;flex-direction:column;gap:10px}
    .match-card{display:grid;grid-template-columns:68px 1fr auto;gap:10px;align-items:center;padding:10px 12px;background:#0e0e14;border:1px solid #2b2b38;border-radius:12px;color:#e9ebf5}
    .m-left{display:flex;flex-direction:column;align-items:center;gap:6px}
    .m-left .stage{font-size:12px;border:1px solid #2b2b38;padding:2px 8px;border-radius:999px;background:#141420}
    .m-left .minute{font-weight:900}
    .m-mid{min-width:0}
    .team{display:flex;justify-content:space-between;gap:10px}
    .team span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .team + .team{margin-top:6px}
    .m-right{font-weight:900;font-size:18px;min-width:68px;text-align:right}
    .m-cta{grid-column:1/-1;margin-top:6px;display:flex;gap:8px}
    .m-cta .pill{border-color:#394155;background:#151a28}
    .is-live .stage{background:#2a1a1a;border-color:#4a2a2a;color:#ff8e8e}
    .is-ht .stage{background:#1a2130;border-color:#2a3950;color:#8ec9ff}
    .is-ft .stage{background:#1a2a1a;border-color:#2a4a2a;color:#9dff9d}
    @media (max-width:620px){.match-card{grid-template-columns:56px 1fr auto}.m-right{font-size:16px;min-width:54px}}

    /* ====== NEXT / AKAN DIMULAI (baru, jam mewah) ====== */
    .next-head{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .next-tabs{display:flex;gap:8px}
    .tab-btn{
      background:#0f1220;border:1px solid #2b2b38;color:#e9ebf5;
      padding:8px 12px;border-radius:999px;font-weight:800;letter-spacing:.2px;cursor:pointer
    }
    .tab-btn.on{background:linear-gradient(180deg,#ffe08e,#ffd86b 55%,#e1b64c);color:#1b1300;border-color:#caa44a}
    .up-group{margin:12px 0}
    .up-head{display:flex;align-items:center;gap:8px;padding:10px 12px;background:#0f1220;border:1px solid #2b2b38;border-radius:12px;font-weight:900}
    .up-body{margin-top:8px;display:flex;flex-direction:column;gap:10px}
    .up-card{
      display:grid;grid-template-columns:92px 1fr auto;gap:12px;align-items:center;
      padding:12px;background:#0e0e14;border:1px solid #2b2b38;border-radius:12px
    }
    @media (max-width:620px){.up-card{grid-template-columns:84px 1fr auto}}
    /* jam bulat mewah */
    .kick{display:flex;flex-direction:column;align-items:center;gap:6px}
    .clock{
      position:relative;width:68px;height:68px;border-radius:999px;
      display:flex;flex-direction:column;align-items:center;justify-content:center;
      background:radial-gradient(120px 120px at 50% 20%, #1a1f2c, #0b0e14);
      color:#f6f7fb;border:1px solid #2f3647;box-shadow:inset 0 8px 30px rgba(0,0,0,.45),0 0 0 1px rgba(0,0,0,.35)
    }
    .clock::after{
      content:"";position:absolute;inset:-1px;border-radius:inherit;padding:1px;
      background:linear-gradient(135deg,#ffd86b,#e1b64c,#ffd86b);
      -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;mask-composite:exclude;
      filter:drop-shadow(0 0 6px rgba(255,216,107,.25));
    }
    .t-big{font-weight:900;font-size:15px;letter-spacing:.4px}
    .t-sub{font-size:11px;color:#d6d9e5;opacity:.9;margin-top:2px}
    .eta{font-size:12px;font-weight:800;letter-spacing:.2px;color:#ffd86b;text-shadow:0 0 8px rgba(255,216,107,.15)}
    .up-mid .team{gap:10px}
    .up-right .pill{border-color:#394155;background:#151a28}

    /* ===== MODAL (popup untuk Lihat Data) ===== */
    .modal{position:fixed;inset:0;display:none;place-items:center;z-index:60}
    .modal.show{display:grid}
    .modal .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(2px)}
    .modal .card{
      position:relative;width:min(920px,94vw);max-height:86vh;overflow:auto;
      background:#0f0f14;border:1px solid #2b2b38;border-radius:16px;
      box-shadow:0 30px 100px rgba(0,0,0,.6)
    }
    .modal .mhead{
      position:sticky;top:0;display:flex;align-items:center;justify-content:space-between;gap:10px;
      padding:10px 14px;border-bottom:1px solid #262633;background:linear-gradient(180deg,#1b1b24,#14141c)
    }
    .modal .mhead .ttl{font-weight:900;letter-spacing:.3px}
    .modal .mclose{
      background:#191922;border:1px solid #2b2b38;color:#e8e9f0;border-radius:10px;padding:6px 10px;cursor:pointer
    }
    .modal .mbody{padding:12px}
  </style>
</head>
<body>

<!-- Loader -->
<div id="loader" class="loader">
  <div class="loader-card">
    <img src="https://i.ibb.co.com/1Y9ddgCc/27aug2025.png" alt="Bandar Toto" style="height:56px;border-radius:10px"/>
    <div class="spin"></div>
    <p>Memuat live score…</p>
  </div>
</div>

<!-- Topbar -->
<header class="topbar">
  <div class="container wrap">
    <a class="brand" href="/" aria-label="Bandar Toto">
      <img class="logo" src="https://i.ibb.co.com/1Y9ddgCc/27aug2025.png" alt="Bandar Toto">
    </a>
    <div class="searchbox">
      <input id="q" type="search" placeholder="Cari liga atau tim..." aria-label="Cari liga atau tim" />
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79L20 21.5 21.5 20l-6-6Zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14Z"/></svg>
    </div>
  </div>
</header>

<!-- Running text -->
<div class="ticker" role="status" aria-live="polite">
  <div class="ticker__track">
    <span>Selamat datang di BANDARTOTO, Bandar Bola, Togel, Live Casino &amp; Slot Online Terbesar di Indonesia.</span>
    <span aria-hidden="true">Selamat datang di BANDARTOTO, Bandar Bola, Togel, Live Casino &amp; Slot Online Terbesar di Indonesia.</span>
  </div>
</div>

<!-- Slider -->
<section class="container">
  <div class="slider" id="slider">
    <div class="slide-track" id="track">
      <div class="slide"><img src="https://bandartoto.b-cdn.net/QRISPAYMENT1.webp" alt="QRIS Payment"></div>
      <div class="slide"><img src="https://bandartoto.b-cdn.net/bonusspesial.webp" alt="Bonus Spesial"></div>
      <div class="slide"><img src="https://bandartoto.b-cdn.net/freebetslot.webp" alt="Freebet Slot"></div>
      <div class="slide"><img src="https://bandartoto.b-cdn.net/providerslotgacor.webp" alt="Provider Slot Gacor"></div>
    </div>
    <button class="ctrl prev" id="prev" aria-label="Sebelumnya">❮</button>
    <button class="ctrl next" id="next" aria-label="Berikutnya">❯</button>
    <div class="dots" id="dots"></div>
  </div>
</section>

<!-- Tombol -->
<section class="container authbar">
  <a class="btn-cta btn-gold" href="https://preciseurl.org/BANDARTOTO" target="_blank" rel="noopener">Daftar</a>
  <a class="btn-cta btn-rgb"  href="https://preciseurl.org/BANDARTOTO" target="_blank" rel="noopener">Login</a>
  <a class="btn-cta btn-rgb" href="/" target="_blank" rel="noopener">Prediksi Skor</a>
</section>

<!-- Judul -->
<section class="hero">
  <div class="container">
    <h1>Live Score</h1>
    <p class="date" id="dateLine"></p>
  </div>
</section>

<!-- ======= LIVE SCORE (pakai API kamu) ======= -->
<section class="container">
  <div class="panel live">
    <div class="head">LIVE SCORE</div>
    <div class="twrap">
      <div id="liveList" class="live-list">
        <div class="muted" style="padding:12px">Memuat data…</div>
      </div>
    </div>
  </div>
</section>

<!-- ======= AKAN DIMULAI (NEXT) — baru ======= -->
<section class="container">
  <div class="panel">
    <div class="head">AKAN DIMULAI (NEXT)</div>
    <div class="twrap" style="padding:10px">
      <div class="next-head">
        <div class="muted mini">Pertandingan akan mulai dalam beberapa jam ke depan.</div>
        <div class="next-tabs">
          <button class="tab-btn on" data-h="2">2j</button>
          <button class="tab-btn" data-h="6">6j</button>
          <button class="tab-btn" data-h="12">12j</button>
          <button class="tab-btn" data-h="24">24j</button>
        </div>
      </div>
      <div id="upcomingList" style="margin-top:10px">
        <div class="muted" style="padding:8px 4px">Memuat jadwal…</div>
      </div>
    </div>
  </div>
</section>

<!-- Hasil Akhir (FT) -->
<section class="container">
  <div class="panel">
    <div class="head">HASIL AKHIR (FT)</div>
    <div class="twrap">
      <table class="t">
        <thead>
          <tr>
            <th style="width:220px">Liga</th>
            <th>Pertandingan</th>
            <th style="width:90px">Skor</th>
            <th style="width:80px">Status</th>
          </tr>
        </thead>
        <tbody id="ftBody"><tr><td colspan="4" class="muted">Memuat data…</td></tr></tbody>
      </table>
    </div>
  </div>
</section>

<!-- Detail Match -->
<section class="container" id="detailBox" style="display:none"></section>

<!-- ===== MODAL untuk Lihat Data ===== -->
<div id="modal" class="modal" aria-hidden="true">
  <div class="backdrop"></div>
  <div class="card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="mhead">
      <div id="modalTitle" class="ttl">MATCH DATA</div>
      <button class="mclose" id="modalClose" aria-label="Tutup">✕</button>
    </div>
    <div id="modalBody" class="mbody"></div>
  </div>
</div>

<footer class="footer">© <span id="y"></span> Bandar Toto • Live Score</footer>

<script>
/* Utils */
const $ = s => document.querySelector(s);
const el = h => {const d=document.createElement('div'); d.innerHTML=h.trim(); return d.firstChild;}
document.getElementById('y').textContent = new Date().getFullYear();
document.getElementById('dateLine').textContent =
  new Date().toLocaleDateString('id-ID',{weekday:'long',day:'2-digit',month:'long',year:'numeric'});

/* Slider */
(function initSlider(){
  const track = document.getElementById('track');
  const slider = document.getElementById('slider');
  const slides = track.children.length;
  let idx = 0, timer=null, startX=0, deltaX=0;
  const dots = document.getElementById('dots');
  for(let i=0;i<slides;i++){
    const dot=document.createElement('div'); dot.className='dot'+(i===0?' active':'');
    dot.addEventListener('click', ()=>go(i,true));
    dots.appendChild(dot);
  }
  const setDots = ()=>[...dots.children].forEach((d,i)=>d.classList.toggle('active', i===idx));
  const go = (n,hold=false)=>{ idx=(n+slides)%slides; track.style.transform=`translateX(-${idx*100}%)`; setDots(); if(hold) reset(); };
  const next=()=>go(idx+1), prev=()=>go(idx-1);
  const reset=()=>{ if(timer) clearInterval(timer); timer=setInterval(next, 3500); };
  document.getElementById('next').onclick = ()=>go(idx+1,true);
  document.getElementById('prev').onclick = ()=>go(idx-1,true);
  slider.addEventListener('mouseenter', ()=>timer&&clearInterval(timer));
  slider.addEventListener('mouseleave', reset);
  slider.addEventListener('touchstart', e=>{startX=e.touches[0].clientX; deltaX=0; if(timer) clearInterval(timer);});
  slider.addEventListener('touchmove', e=>{deltaX = e.touches[0].clientX - startX;});
  slider.addEventListener('touchend', ()=>{ if(Math.abs(deltaX)>40){ deltaX>0?prev():next(); } reset(); });
  reset();
})();

/* ===== FILTER pencarian (live + upcoming + FT) ===== */
function applyFilter(){
  const q = ($('#q').value||'').trim().toLowerCase();

  // live
  document.querySelectorAll('.match-card').forEach(card=>{
    const row = (card.getAttribute('data-row')||'').toLowerCase();
    card.style.display = !q || row.includes(q) ? '' : 'none';
  });
  document.querySelectorAll('.lg').forEach(g=>{
    const any = !!g.querySelector('.match-card:not([style*="display: none"])');
    g.style.display = any ? '' : 'none';
  });

  // upcoming
  document.querySelectorAll('.up-card').forEach(card=>{
    const row = (card.getAttribute('data-row')||'').toLowerCase();
    card.style.display = !q || row.includes(q) ? '' : 'none';
  });
  document.querySelectorAll('.up-group').forEach(g=>{
    const any = !!g.querySelector('.up-card:not([style*="display: none"])');
    g.style.display = any ? '' : 'none';
  });

  // FT
  document.querySelectorAll('#ftBody tr[data-row]').forEach(tr=>{
    const row = tr.getAttribute('data-row') || '';
    tr.style.display = !q || row.includes(q) ? '' : 'none';
  });
}
$('#q').addEventListener('input', applyFilter);

/* Helper kecil */
function leagueCell(r){const f=r.flag?`<img class="flag" src="${r.flag}" alt="" loading="lazy">`:'';return `${f}${r.league}`;}
function parseTeams(match=''){const [home='', away='']=match.split(' vs ');return {home, away};}
function stageClass(t=''){const s=t.toLowerCase();if(s.includes('ft'))return'is-ft';if(s.includes('ht'))return'is-ht';if(/\d/.test(s))return'is-live';return'';}
function splitKickoff(str=''){const m=(str||'').match(/(\d{2}\/\d{2}).*?(\d{2}[:.]\d{2})/);return {d:m?.[1]||'-',t:(m?.[2]||'-').replace('.',':')};}
function fmtEta(mins){mins=Math.max(0,Math.round(mins));const h=Math.floor(mins/60);const m=mins%60;return h?`${h}j ${m}m`:`${m}m`;}

/* ===== LIVE ===== */
async function fetchLive(){const r=await fetch('/api/live');if(!r.ok)throw new Error('HTTP '+r.status);return r.json();}
async function loadLive(){
  const loader=$('#loader'); loader.classList.add('show');
  try{
    const data = await fetchLive();
    const rows = data.rows || [];
    const groups = {};
    rows.forEach(r=>{const key=`${r.league}__${r.flag||''}`;(groups[key] ||= {title:r.league, flag:r.flag, items:[]}).items.push(r);});
    const html = Object.values(groups).map(g=>{
      const head=`<div class="lg-head">${g.flag?`<img class="flag" src="${g.flag}" alt="">`:``}<span class="lname">${g.title}</span></div>`;
      const body=g.items.map(r=>{const {home,away}=parseTeams(r.match||'');const klass=stageClass(r.time||'');return `
        <div class="match-card ${klass}" data-row="${(r.league+' '+r.match).toLowerCase()}">
          <div class="m-left"><div class="stage">${(r.time||'').toUpperCase()}</div><div class="minute mini muted">Live</div></div>
          <div class="m-mid"><div class="team"><span>${home}</span></div><div class="team"><span>${away}</span></div></div>
          <div class="m-right">${r.score||'-'}</div>
          <div class="m-cta"><button class="pill" onclick="openMatch(${r.id})">Lihat Data</button></div>
        </div>`;}).join('');
      return `<div class="lg">${head}<div class="lg-body">${body||`<div class="muted mini" style="padding:8px 12px">Belum ada pertandingan.</div>`}</div></div>`;
    }).join('');
    $('#liveList').innerHTML = html || `<div class="muted" style="padding:12px">Belum ada pertandingan live.</div>`;
    applyFilter();
  }catch{ $('#liveList').innerHTML = `<div class="muted" style="padding:12px">Gagal memuat live score.</div>`; }
  finally{ loader.classList.remove('show'); }
}
loadLive();
setInterval(loadLive, 60000);

/* ===== UPCOMING (NEXT) ===== */
async function fetchUpcoming(h){const r=await fetch('/api/upcoming?hours='+h);if(!r.ok)throw new Error('HTTP '+r.status);return r.json();}
function renderUpcoming(data){
  const rows = data.rows || [];
  const groups={};
  rows.forEach(r=>{const key=`${r.league}__${r.flag||''}`;(groups[key] ||= {title:r.league, flag:r.flag, items:[]}).items.push(r);});
  const html = Object.values(groups).map(g=>{
    const head = `<div class="up-head">${g.flag?`<img class="flag" src="${g.flag}" alt="">`:``}<span>${g.title}</span></div>`;
    const body = g.items.map(r=>{
      const {home,away}=parseTeams(r.match||'');
      const {d,t}=splitKickoff(r.kickoff||'');
      const now = Date.now();
      return `
        <div class="up-card" data-row="${(r.league+' '+r.match).toLowerCase()}" data-created="${now}" data-eta="${r.in}">
          <div class="kick">
            <div class="clock"><div class="t-big">${t}</div><div class="t-sub">${d}</div></div>
            <div class="eta">in ${fmtEta(r.in)}</div>
          </div>
          <div class="up-mid">
            <div class="team"><span>${home}</span></div>
            <div class="team"><span>${away}</span></div>
          </div>
          <div class="up-right"><button class="pill" onclick="openMatch(${r.id})">Detail</button></div>
        </div>`;
    }).join('');
    return `<div class="up-group">${head}<div class="up-body">${body||`<div class="muted mini" style="padding:8px 12px">Tidak ada jadwal dalam rentang ini.</div>`}</div></div>`;
  }).join('');
  $('#upcomingList').innerHTML = html || `<div class="muted" style="padding:8px 12px">Tidak ada jadwal dalam rentang ini.</div>`;
  applyFilter();
}
async function loadUpcoming(hours=2){
  try{ const d = await fetchUpcoming(hours); renderUpcoming(d); }
  catch{ $('#upcomingList').innerHTML=`<div class="muted" style="padding:8px 12px">Gagal memuat jadwal.</div>`; }
}
document.querySelectorAll('.tab-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('on'));
    btn.classList.add('on');
    loadUpcoming(btn.dataset.h || 2);
  });
});
function tickEta(){
  const now = Date.now();
  document.querySelectorAll('.up-card').forEach(card=>{
    const created = Number(card.getAttribute('data-created')||now);
    const base = Number(card.getAttribute('data-eta')||0);
    const gone = Math.round((now - created)/60000);
    const left = Math.max(0, base - gone);
    const el = card.querySelector('.eta');
    if (el) el.textContent = 'in ' + fmtEta(left);
  });
}
loadUpcoming(2);
setInterval(()=>{ loadUpcoming(document.querySelector('.tab-btn.on')?.dataset.h||2); }, 120000);
setInterval(tickEta, 30000);

/* ===== FT ===== */
async function fetchFinished(){const r=await fetch('/api/finished');if(!r.ok)throw new Error('HTTP '+r.status);return r.json();}
async function loadFinished(){
  try{
    const data = await fetchFinished();
    const rows = (data.rows||[]).map(r => `
      <tr data-row="${(r.league+' '+r.match).toLowerCase()}">
        <td>${leagueCell(r)}</td>
        <td>${r.match}</td>
        <td class="score">${r.score}</td>
        <td>${r.status || 'FT'}</td>
      </tr>`).join('');
    $('#ftBody').innerHTML = rows || `<tr><td colspan="4" class="muted">Belum ada yang selesai hari ini.</td></tr>`;
    applyFilter();
  }catch{ $('#ftBody').innerHTML = `<tr><td colspan="4" class="muted">Gagal memuat hasil akhir.</td></tr>`; }
}
loadFinished();

/* ===== MODAL controls ===== */
const modal = $('#modal');
const modalBody = $('#modalBody');
const modalClose = $('#modalClose');
function showModal(html){
  modalBody.innerHTML = html;
  modal.classList.add('show');
  document.body.style.overflow = 'hidden';
  setTimeout(()=>modalClose?.focus(), 50);
}
function hideModal(){
  modal.classList.remove('show');
  modalBody.innerHTML = '';
  document.body.style.overflow = '';
}
modalClose.addEventListener('click', hideModal);
modal.addEventListener('click', (e)=>{ if (e.target.classList.contains('backdrop')) hideModal(); });
document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') hideModal(); });

/* ===== DETAIL MATCH → tampil di modal ===== */
async function fetchMatch(id){const r=await fetch('/api/match/'+id);if(!r.ok)throw new Error('HTTP '+r.status);return r.json();}
function statTable(title, home, away){
  const keys = new Set([...(home||[]), ...(away||[])].map(s=>s.type));
  const get = (arr, k) => (arr.find(x=>x.type===k)?.value ?? '-');
  return `
  <div class="panel">
    <div class="head">${title}</div>
    <div class="twrap">
      <table class="t">
        <thead><tr><th style="width:36%">Home</th><th>Stat</th><th style="width:36%">Away</th></tr></thead>
        <tbody>
          ${[...keys].map(k=>`<tr><td>${get(home,k)}</td><td>${k}</td><td>${get(away,k)}</td></tr>`).join('')}
        </tbody>
      </table>
    </div>
  </div>`;
}
function minuteTable(title, dist){
  return `
  <div class="panel">
    <div class="head">${title.toUpperCase()}</div>
    <div class="twrap">
      <table class="t">
        <thead><tr><th>Time</th><th>Scored</th><th>Conceded</th></tr></thead>
        <tbody>
          ${(dist||[]).map(r=>`<tr><td>${r.bucket}</td><td>${r.for}</td><td>${r.against}</td></tr>`).join('')}
        </tbody>
      </table>
    </div>
  </div>`;
}
function eventsBlock(list){
  if (!list || !list.length) return `<div class="muted mini">Belum ada event.</div>`;
  return `
    <div class="grid">
      ${list.sort((a,b)=>a.time-b.time).map(e=>`
        <div class="evt">
          <div class="t">${e.time}'</div>
          <div><span class="badge">${e.team}</span> — ${e.type}${e.detail?(' · '+e.detail):''}${e.player?(' · '+e.player):''}</div>
        </div>`).join('')}
    </div>`;
}
async function openMatch(id){
  showModal(`<div class="panel"><div class="head">MATCH DATA</div><div class="twrap"><div style="padding:12px" class="muted">Memuat detail…</div></div></div>`);
  try{
    const d = await fetchMatch(id);
    const sb = d.scoreboard || {};
    const header = `
      <div class="panel live">
        <div class="head">SCOREBOARD</div>
        <div class="twrap">
          <div style="padding:14px" class="grid cols-3">
            <div style="text-align:right;font-weight:800">${sb.home||'-'}</div>
            <div style="text-align:center;font-size:28px;font-weight:900">${sb.score||'-'}</div>
            <div style="font-weight:800">${sb.away||'-'}</div>
            <div class="muted" style="grid-column:1 / -1; text-align:center">Status: <span class="pill">${sb.time||'-'}</span></div>
          </div>
          <div class="divider"></div>
          <div style="padding:12px">
            <div class="mini muted" style="margin-bottom:6px">Events</div>
            ${eventsBlock(d.events)}
          </div>
        </div>
      </div>`;
    const stats = statTable('STATISTIK PERTANDINGAN', d.stats?.home||[], d.stats?.away||[]);
    const mins = `
      <div class="grid cols-2">
        ${minuteTable('HOME — Scored/Conceded (15 min)', d.distribution?.home||[])}
        ${minuteTable('AWAY — Scored/Conceded (15 min)', d.distribution?.away||[])}
      </div>`;
    modalBody.innerHTML = header + stats + mins;
  }catch{
    modalBody.innerHTML = `<div class="panel"><div class="head">MATCH DATA</div><div class="twrap"><div style="padding:12px" class="muted">Gagal memuat data.</div></div></div>`;
  }
}
</script>
</body>
</html>
